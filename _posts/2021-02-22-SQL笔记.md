---
layout:     post
title:      数据库系统
subtitle:   数据库的基本概念
date:       2021-02-22
author:     LynchLeo
header-img: img/post-web.jpg
catalog: true
tags:
    - SQL
---

下文所用SQL在线网站：
[https://www.db-book.com/db7/university-lab-dir/sqljs.html](https://www.db-book.com/db7/university-lab-dir/sqljs.html)

参考网站：
[https://taogenjia.com/2019/10/24/database-system-1-introduction/#其它特性（非关系型）数据库](https://taogenjia.com/2019/10/24/database-system-1-introduction/#其它特性（非关系型）数据库)

# 数据（Data）

## 数据抽象（Data Abstraction）

* 从最低到最高：
  * 物理层（Physical Level）专注于数据的实际格式和位置
  * 逻辑层（Logical Level）侧重于数据的含义，内容和上下文
  * 视图层（View Level）专注于简化与系统的交互

## 逻辑视图（Logic View）

* 数据按组或类别进行组织
* 字段（Field）：一系列相关的字符
* 记录（Record）：一系列相关的字段
  * 例：一个人的姓名、年龄及身份证号
* 表（Table）：一系列相关的记录
* 数据库（Database）：基于关系模型的，一系列相关的表

## 主键（Key Field / Primary Key）

* 唯一标识符（Unique Identifier）
* 用于创建表之间的关系，将数据集成到数据库中

## 批处理（Batch Processing）与实时处理（Real-Time Processing）

* 在批处理中，在几个小时，几天甚至几周内收集数据，然后统一进行处理
  * 例：月底一次性处理的信用卡账单
* 在实时处理中，数据一旦产生就立刻进行处理

# 数据库（Database）

## 数据库的优点

* 共享（Sharing）
* 安全（Security）：访问受限
* 减少数据冗余（Less Data Redundancy）：减少不必要的重复
* 数据完整性（Data Integrity）：减少数据不正确的可能性
  * 一个人的货物发送到他的新地址，但帐单发给了他的旧地址，这很可能归因于数据完整性不足

> 可靠性（Reliability）不是使用数据库的优势

## 数据库管理系统（Database Management System / DBMS）

* 用于创建、修改和访问数据库的软件
* 由相互关联的数据的集合和访问该数据的程序的集合组成
* 包含五个子系统：
  * DBMS引擎（DBMS Engine）提供了逻辑层和物理层之间的桥梁
  * 数据定义子系统（Data Definition Subsystem）使用数据字典（Data Dictionary）或模式（Schema）定义数据库的逻辑结构
  * 数据处理子系统（Data Manipulation Subsystem）提供了用于数据维护和数据分析的工具，如示例查询（Query by Example / QBE）和结构化查询语言（Structured Query Language / SQL）
  * 应用程序生成子系统（Application Generation Subsystem）提供了使用专用编程语言创建数据输入表单的工具
  * 数据管理子系统（Data Administration Subsystem）管理数据库
    * 数据库管理员（Database Administrators / DBAs）是计算机专业人员，可以帮助定义数据库中数据的处理权限和访问权限

## 常见数据库模型（Common Database Models）

* 分层数据库（Hierarchical Database）
  * 结构化的字段或记录存储在节点（Node）中
    * 一对多关系
      * 每个节点一个父级
      * 父级可以有几个子节点
  * 主要问题是，如果父节点被删除，那么所有从属子节点也会被删除

* 网络数据库（Network Database）
  * 分层节点排列
    * 多对多关系
      * 每个子节点可能有多个父节点   
  * 节点之间的其他连接是指针
  * 节点可以通过多条路径到达

* 关系型数据库（Relational Database）
  * 一种更灵活的类型，其中在层次结构下没有访问路径
    * 表中存储的数据称为关系（Relation）
    * 表由行和列组成
    * 通过主键关联的表
  * 拥有嫌疑人的驾照号码的警察可以使用关系数据库来跟踪其家庭住址

* 多维数据库（Multidimensional Database）
  * 关系型数据库的变化和扩展
  * 包括一个数据立方体
    * 扩展二维数据模型以包括附加或多维
  * 非常适合表示复杂的关系
  * 与关系数据库相比的优势：
    * 概念化为用户提供了一个直观的模型，其中可以将复杂的数据和关系概念化
    * 分析和查询大型多维数据库的处理速度更快

* 面向对象的数据库（Object-Oriented Database）
  * 存储数据以及操作数据的指令
  * 组织数据使用：
    * 类（Classes）
    * 对象（Objects）：类的特定实例，包含数据和操作数据的指令
    * 属性（Attributes）：对象拥有的数据字段
    * 方法（Methods）：检索或操作属性值的说明 

## 数据库类型

* 个人或个人计算机数据库（Individual or Personal Computer Database）
   * 仅一人使用的集成文件
   * 数据和DBMS存储在用户的硬盘驱动器或LAN文件服务器上
* 公司数据库（Company Database）
   * 组织中共享常用操作或常用文件
* 分布式数据库（Distributed Database）
   * 数据库在地理上分布并使用数据库服务器进行访问
* 商业或信息实用程序或数据库（Commercial or Information Utilities or Data Banks）
   * 组织为涵盖特定主题而开发的庞大数据库

## 实例（Instances）和模式（Schemas）

* 逻辑模式（Logical Schema）：数据库的整体逻辑结构，类似于程序中变量的类型信息
  * 示例：数据库包含有关银行中一组客户和帐户以及它们之间的关系的信息 
* 物理模式（Physical Schema）：数据库的整体物理结构
* 实例：特定时间点数据库的实际内容，类似于变量
* 物理数据独立性（Physical Data Independence）：无需更改逻辑架构即可修改物理架构的能力
  * 应用程序取决于逻辑模式
  * 通常，应明确定义各个级别和组件之间的接口，以便某些部分的更改不会严重影响其他部分
  * 如果数据的存储结构或访问技术有所更改，则不必相应地重新编写和重新编译应用程序

## 数据定义语言（Data Definition Language / DDL）

* 定义数据库模式和数据的属性

     例：

```sql
        create table instructor (
               ID          char(5),
               name        varchar(20),
               dept_name   varchar(20),
               salary      numeric(8,2))
```

* DDL编译器生成一组存储在数据字典中的表模板
* 数据字典包含元数据（即有关数据的数据）
  * 数据库模式
  * 诚信约束
    * 主键
  * 授权

## 数据操纵语言（Data Manipulation Language / DML）

* 访问和更新由适当的数据模型组织的数据
* 基本上有两种类型的数据操纵语言：
  * 程序式（Procedural）DML：要求用户指定所需的数据，以及如何获取这些数据。
  * 声明式（Declarative）DML：要求用户指定所需的数据，而不指定如何获取这些数据。
  * 声明式DML也称为非程序式DML，通常比程序式DML更易于学习和使用
* DML中涉及信息检索的部分称为查询语言（Query Language）

## SQL查询语言（SQL Query Language）

* SQL查询语言是非程序式的。查询将多个表（可能只有一个）作为输入，并且始终返回单个表
* 例：查找 Sci. dept的所有讲师

```sql
    SELECT name FROM instructor WHERE dept_name = 'Comp. Sci.';
```

* SQL不是图灵机等效语言（Turing Machine Equivalent Language）
* 为了能够计算复杂的函数，SQL通常嵌入到某些高级语言中
* 应用程序通常通过以下方式之一访问数据库
   * 语言扩展允许嵌入式SQL
   * 应用程序接口（如ODBC / JDBC）允许将SQL查询发送到数据库

## 数据库设计

设计数据库一般架构的过程：

* 逻辑设计：决定数据库模式。数据库设计要求我们找到关系模式的“良好”集合
   * 商业决策：我们应该在数据库中记录哪些属性？
   * 计算机科学决策：我们应该拥有哪些关系模式，以及如何在各种关系模式之间分配属性？
* 物理设计：确定数据库的物理布局

## 数据库引擎

* 数据库系统分为多个模块，分别处理整个系统的各项职责
* 数据库系统的功能组件可以分为：
   * 存储经理（Storage Manager）
   * 查询处理器组件
   * 交易管理组件

## Storage Manager






