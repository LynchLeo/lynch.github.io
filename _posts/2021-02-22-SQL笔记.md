---
layout:     post
title:      SQL笔记
subtitle:   语句
date:       2021-02-22
author:     LynchLeo
header-img: img/post-web.jpg
catalog: true
tags:
    - SQL
---

[https://www.db-book.com/db7/university-lab-dir/sqljs.html](https://www.db-book.com/db7/university-lab-dir/sqljs.html)

# 基础语句

## SELECT

> 从数据库中选取数据。

格式：

```sql
SELECT column_name,column_name 
FROM table_name;
```

实际运用：

```sql
SELECT * FROM section;
SELECT course_id FROM section;
SELECT course_id, room_number FROM section;
```

### DISTINCT

> 列出不重复的值。

```sql
SELECT DISTINCT * FROM section;
SELECT DISTINCT sec_id FROM section;
SELECT DISTINCT sec_id, building FROM section;
```

## WHERE

> 提取满足指定条件的记录。

格式：

```sql
SELECT column_name,column_name 
FROM table_name 
WHERE column_name operator value;
```

实际运用：

```sql
-- 文本须加引号，区分大小写。
SELECT * FROM section WHERE semester = 'Fall';
-- 错误的写法: SELECT * FROM section WHERE semester = Fall;

-- 数值可以加引号，最好不加。
SELECT * FROM section WHERE sec_id = 2;
SELECT * FROM section WHERE sec_id = '2';
```

### = 或 IS

```sql
SELECT * FROM section WHERE sec_id IS NULL;
```

### <> 或 !=

```sql
SELECT * FROM section WHERE sec_id <> 1;
```

### < ， > ， <= ， >=

```sql
SELECT * FROM time_slot WHERE start_hr > 13;
```

### BETWEEN ... AND ...

> 包含边界。

```sql
SELECT * FROM time_slot WHERE start_hr BETWEEN 13 AND 16;
```

### LIKE 加 % 或 \_

> % 表示多个字符，\_ 表示一个字符

```sql
SELECT * FROM instructor WHERE dept_name LIKE '%sic%';
SELECT * FROM instructor WHERE dept_name LIKE 'His%';
SELECT * FROM instructor WHERE dept_name LIKE '%o_y';
```

### IN()

> 和 OR 加 = 一个效果

```sql
SELECT * FROM instructor WHERE dept_name IN('Music', 'History');
SELECT * FROM instructor WHERE dept_name IS 'Music' OR dept_name IS 'History';
```

### () , NOT , AND , OR

> 优先级：() > NOT > AND > OR

```sql
SELECT * FROM instructor WHERE salary > 70000 AND NOT dept_name LIKE '%sic%';
```

## ORDER BY

> 排序。默认为正序ASC，DESC为倒序。只对其紧跟着的第一个列名有效，其他不受影响。

格式：

```sql
SELECT column_name,column_name
FROM table_name
ORDER BY column_name,column_name ASC|DESC;
```

实际运用：

```sql
SELECT * FROM time_slot;
SELECT * FROM time_slot ORDER BY start_hr DESC, day;
```

## INSERT INTO

> 向表中插入新记录。如果列出插入行的每一列数据，则不需要指定列名。

格式：

```sql
INSERT INTO table_name (column1,column2,column3,...)
VALUES (value1,value2,value3,...);
```

实际运用：

```sql
SELECT * FROM section;
INSERT INTO section (course_id, sec_id, semester, year, time_slot_id) VALUES ('BIO-201', 2, 'Fall', 2018, 'D');
SELECT * FROM section;
INSERT INTO section VALUES ('BIO-401', 2, 'Fall', 2018, 'Packard', 100, 'D');
SELECT * FROM section;
```

## UPDATE

> 更新表中已存在的记录。

格式：

```sql
UPDATE table_name
SET column1=value1,column2=value2,...
WHERE some_column=some_value;
```

实际运用：

```sql
SELECT * FROM section;
UPDATE section SET semester = 'Winter', time_slot_id = 'A' WHERE room_number = 101;
SELECT * FROM section;
```

> 如果省略 WHERE 子句，所有的记录都将被更新，因此一定要注意

```sql
SELECT * FROM section;
UPDATE section SET semester = 'Winter', time_slot_id = 'A';
SELECT * FROM section;
```

## DELETE

> 删除表中的记录

格式：

```sql
DELETE FROM table_name
WHERE some_column=some_value;
```

实际运用：

```sql
SELECT * FROM section;
DELETE FROM section WHERE semester = 'Fall';
SELECT * FROM section;
```

> 同样，如果省略 WHERE 子句，所有的记录都将被删除，因此一定要注意。

> 除此之外，删除操作无法撤销，也需要注意




